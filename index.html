<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„æ—…éŠ App</title>
    <style>
        body { font-family: sans-serif; max-width: 500px; margin: auto; padding: 20px; background: #f4f7f6; }
        .input-card { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        input { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .item { background: white; padding: 10px; margin-top: 10px; border-left: 5px solid #007bff; border-radius: 3px; }
    </style>
</head>
<body>

    <h2>ğŸ“ æ–°å¢è¡Œç¨‹</h2>
    <div class="input-card">
        <input type="text" id="time" placeholder="æ™‚é–“ (ä¾‹ï¼š10:00)">
        <input type="text" id="activity" placeholder="åœ°é»/æ´»å‹•">
        <button onclick="saveData()">å­˜å…¥é›²ç«¯</button>
    </div>

    <h2>ğŸ—ºï¸ è¡Œç¨‹æ¸…å–®</h2>
    <div id="list">åŠ è½½ä¸­...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, onSnapshot, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // âš ï¸ è«‹æŠŠä½ åœ¨ Firebase çœ‹åˆ°çš„é‚£æ®µ firebaseConfig è²¼åœ¨é€™è£¡ âš ï¸
        const firebaseConfig = {
            apiKey: "AIzaSyCcXPvCma5TilSjZfAGYJg8n8ZfAAsqNtE",
            authDomain: "my-travel-app-b029c.firebaseapp.com",
            projectId: "my-travel-app-b029c",
            storageBucket: "my-travel-app-b029c.firebasestorage.app",
            messagingSenderId: "898590101576",
            appId: "1:898590101576:web:7c1916bb7ebbada144487d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // å„²å­˜è³‡æ–™åˆ°é›²ç«¯
        window.saveData = async () => {
            const time = document.getElementById('time').value;
            const activity = document.getElementById('activity').value;
            if(time && activity) {
                await addDoc(collection(db, "trips"), { time, activity, createdAt: new Date() });
                document.getElementById('time').value = '';
                document.getElementById('activity').value = '';
            }
        };

        // å¾é›²ç«¯å³æ™‚æŠ“å–è³‡æ–™
        const q = query(collection(db, "trips"), orderBy("createdAt", "asc"));
        onSnapshot(q, (snapshot) => {
            let html = '';
            snapshot.forEach(doc => {
                const data = doc.data();
                html += `<div class="item"><b>${data.time}</b> - ${data.activity}</div>`;
            });
            document.getElementById('list').innerHTML = html;
        });
    </script>
</body>
</html>
